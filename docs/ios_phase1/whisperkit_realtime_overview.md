# WhisperKit ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ–‡å­—èµ·ã“ã— æ¦‚è¦

**å¯¾è±¡**: iOSç‰ˆGaQ Transcriber ã®æ–‡å­—èµ·ã“ã—ã‚¨ãƒ³ã‚¸ãƒ³ç†è§£
**ä½œæˆæ—¥**: 2025-10-23
**æ‹…å½“**: Claude Code
**å¯¾è±¡è€…**: Yoshihitoã•ã‚“ï¼ˆåˆå¿ƒè€…å‘ã‘ï¼‰

---

## ğŸ“‹ ç›®æ¬¡

1. [WhisperKitã¨ã¯](#whisperkitã¨ã¯)
2. [ç–‘ä¼¼ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¨è«–ã®ä»•çµ„ã¿](#ç–‘ä¼¼ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¨è«–ã®ä»•çµ„ã¿)
3. [StreamingTranscriptionã®å®Ÿè£…ä¾‹](#streamingtranscriptionã®å®Ÿè£…ä¾‹)
4. [ãƒãƒ£ãƒ³ã‚¯å‡¦ç†ã®è©³ç´°](#ãƒãƒ£ãƒ³ã‚¯å‡¦ç†ã®è©³ç´°)
5. [æ–‡å¢ƒç•Œæ•´å½¢ã®æ–¹é‡](#æ–‡å¢ƒç•Œæ•´å½¢ã®æ–¹é‡)
6. [ç•™æ„ç‚¹ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹](#ç•™æ„ç‚¹ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹)

---

## WhisperKitã¨ã¯

### æ¦‚è¦

**WhisperKit**ã¯ã€OpenAIã®éŸ³å£°èªè­˜ãƒ¢ãƒ‡ãƒ«**Whisper**ã‚’iOSã§å‹•ä½œã•ã›ã‚‹ãŸã‚ã®**Swiftè£½ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**ã§ã™ã€‚

**é–‹ç™ºå…ƒ**: Argmaxç¤¾
**ãƒ©ã‚¤ã‚»ãƒ³ã‚¹**: MIT Licenseï¼ˆå•†ç”¨åˆ©ç”¨å¯èƒ½ï¼‰
**GitHubãƒªãƒã‚¸ãƒˆãƒª**: https://github.com/argmaxinc/WhisperKit

### ä¸»ãªç‰¹å¾´

| ç‰¹å¾´ | èª¬æ˜ |
|------|------|
| **å®Œå…¨ã‚ªãƒ•ãƒ©ã‚¤ãƒ³** | ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆä¸è¦ã€ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ä¿è­· |
| **Swiftè£½** | iOSãƒã‚¤ãƒ†ã‚£ãƒ–ã€ä»–è¨€èªãƒ–ãƒªãƒƒã‚¸ä¸è¦ |
| **CoreMLæœ€é©åŒ–** | Apple Siliconï¼ˆA/M seriesï¼‰ã«æœ€é©åŒ– |
| **ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¯¾å¿œ** | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é¢¨ã®æ–‡å­—èµ·ã“ã—ãŒå¯èƒ½ |
| **è¤‡æ•°ãƒ¢ãƒ‡ãƒ«å¯¾å¿œ** | Tiny/Base/Small/Medium/Large-v3 |

### faster-whisperã¨ã®æ¯”è¼ƒ

GaQ Transcriberã®Mac/Windowsç‰ˆã§ã¯**faster-whisper**ï¼ˆPythonï¼‰ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ãŒã€iOSç‰ˆã§ã¯**WhisperKit**ï¼ˆSwiftï¼‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

| é …ç›® | faster-whisper (Mac/Win) | WhisperKit (iOS) |
|------|--------------------------|------------------|
| **è¨€èª** | Python | Swift |
| **ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ** | Mac, Windows, Linux | iOS, macOS |
| **GPU** | CUDA (NVIDIA) | CoreML (Apple Silicon) |
| **ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°** | âŒ éå¯¾å¿œ | âœ… å¯¾å¿œ |
| **å®Ÿè£…é›£æ˜“åº¦** | ç°¡å˜ï¼ˆPythonï¼‰ | ä¸­ç¨‹åº¦ï¼ˆSwiftï¼‰ |

**å…±é€šç‚¹**:
- âœ… ã©ã¡ã‚‰ã‚‚Whisperãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨
- âœ… ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å‹•ä½œ
- âœ… åŒã˜ç²¾åº¦ï¼ˆåŒä¸€ãƒ¢ãƒ‡ãƒ«ã®å ´åˆï¼‰

---

## ç–‘ä¼¼ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¨è«–ã®ä»•çµ„ã¿

### ã€Œãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã€ã®æ„å‘³

WhisperKitã®ã€Œã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°æ–‡å­—èµ·ã“ã—ã€ã¯ã€**å®Œå…¨ãªãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ **ã§ã¯ãªãã€**ç–‘ä¼¼ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ **ã§ã™ã€‚

**å®Œå…¨ãªãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ **ï¼ˆä¾‹: GoogleéŸ³å£°å…¥åŠ›ï¼‰:
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç™ºè©± â†’ å³åº§ã«æ–‡å­—åŒ–ï¼ˆé…å»¶0.1ç§’ç¨‹åº¦ï¼‰
```

**ç–‘ä¼¼ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ **ï¼ˆWhisperKitï¼‰:
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç™ºè©± â†’ æ•°ç§’ãƒãƒƒãƒ•ã‚¡ â†’ æ¨è«– â†’ æ–‡å­—åŒ–ï¼ˆé…å»¶3-5ç§’ç¨‹åº¦ï¼‰
```

### ãƒãƒ£ãƒ³ã‚¯åˆ†å‰²æ–¹å¼

WhisperKitã¯ã€éŸ³å£°ã‚’**å°ã•ãªãƒãƒ£ãƒ³ã‚¯**ï¼ˆå¡Šï¼‰ã«åˆ†å‰²ã—ã¦é †æ¬¡å‡¦ç†ã—ã¾ã™ã€‚

**å‡¦ç†ãƒ•ãƒ­ãƒ¼**:
```
10åˆ†éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«
  â†“
ãƒãƒ£ãƒ³ã‚¯1ï¼ˆ0-5ç§’ï¼‰ â†’ æ¨è«– â†’ "ã“ã‚“ã«ã¡ã¯ã€‚"
ãƒãƒ£ãƒ³ã‚¯2ï¼ˆ5-10ç§’ï¼‰ â†’ æ¨è«– â†’ "ä»Šæ—¥ã¯è‰¯ã„å¤©æ°—ã§ã™ã­ã€‚"
ãƒãƒ£ãƒ³ã‚¯3ï¼ˆ10-15ç§’ï¼‰ â†’ æ¨è«– â†’ "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¤ã„ã¦..."
  â†“
é€æ¬¡çš„ã«UIã«è¡¨ç¤ºï¼ˆç–‘ä¼¼ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ï¼‰
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å‡¦ç†ã®é€²è¡Œã‚’ç¢ºèªã§ãã‚‹
- âœ… 10åˆ†éŸ³å£°ã§ã‚‚30ç§’ã€œ1åˆ†ã§å…¨çµæœãŒæƒã†

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**:
- âš ï¸ ãƒãƒ£ãƒ³ã‚¯å¢ƒç•Œã§æ–‡è„ˆãŒé€”åˆ‡ã‚Œã‚‹å¯èƒ½æ€§
- âš ï¸ å®Œå…¨ãªãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã¯ãªã„

---

## StreamingTranscriptionã®å®Ÿè£…ä¾‹

### åŸºæœ¬çš„ãªAPIä½¿ç”¨æ³•

WhisperKitã®å…¬å¼ã‚µãƒ³ãƒ—ãƒ«ï¼ˆ`StreamingTranscriptionView.swift`ï¼‰ã‚’ãƒ™ãƒ¼ã‚¹ã«è§£èª¬ã—ã¾ã™ã€‚

#### 1. WhisperKitã®åˆæœŸåŒ–

```swift
import WhisperKit

// WhisperKitã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆ
let whisperKit = try await WhisperKit(
    model: "base",  // ä½¿ç”¨ãƒ¢ãƒ‡ãƒ«ï¼ˆtiny/base/small/medium/large-v3ï¼‰
    downloadBase: true  // ãƒ¢ãƒ‡ãƒ«ãŒæœªãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã®å ´åˆã¯è‡ªå‹•DL
)
```

**å¼•æ•°ã®èª¬æ˜**:
- `model`: ä½¿ç”¨ã™ã‚‹Whisperãƒ¢ãƒ‡ãƒ«ï¼ˆGaQ iOSç‰ˆã§ã¯**base**ã¾ãŸã¯**small**ã‚’æ¨å¥¨ï¼‰
- `downloadBase`: ãƒ¢ãƒ‡ãƒ«ãŒç«¯æœ«ã«ãªã„å ´åˆã€è‡ªå‹•ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã‹

#### 2. ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°æ–‡å­—èµ·ã“ã—ã®å®Ÿè¡Œ

```swift
// éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã®URLï¼ˆä¾‹: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ•ã‚©ãƒ«ãƒ€å†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
let audioURL = URL(fileURLWithPath: "/path/to/audio.m4a")

// ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°æ¨è«–ã‚’é–‹å§‹
for try await result in whisperKit.transcribe(
    audioPath: audioURL,
    decodeOptions: DecodingOptions(
        task: .transcribe,  // ã‚¿ã‚¹ã‚¯ï¼ˆtranscribe: æ–‡å­—èµ·ã“ã—ï¼‰
        language: "ja",  // è¨€èªï¼ˆæ—¥æœ¬èªï¼‰
        wordTimestamps: true  // å˜èªãƒ¬ãƒ™ãƒ«ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’å–å¾—
    )
) {
    // ä¸­é–“çµæœã‚’å—ä¿¡ï¼ˆAsyncSequenceï¼‰
    print("ğŸ“ ä¸­é–“çµæœ: \(result.text)")

    // UIã‚’æ›´æ–°ï¼ˆSwiftUIã®å ´åˆï¼‰
    await MainActor.run {
        transcribedText = result.text  // è¡¨ç¤ºãƒ†ã‚­ã‚¹ãƒˆã‚’æ›´æ–°
        progress = result.progress  // é€²æ—ãƒãƒ¼ã‚’æ›´æ–°
    }
}

print("âœ… æ–‡å­—èµ·ã“ã—å®Œäº†")
```

**é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ**:

##### AsyncSequenceï¼ˆéåŒæœŸã‚·ãƒ¼ã‚±ãƒ³ã‚¹ï¼‰
```swift
for try await result in whisperKit.transcribe(...) {
    // ã“ã®ä¸­ã§ä¸­é–“çµæœã‚’é€æ¬¡å—ä¿¡
}
```
- `await`ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§éåŒæœŸå‡¦ç†ã‚’å¾…æ©Ÿ
- `for`ãƒ«ãƒ¼ãƒ—ã§ä¸­é–“çµæœã‚’1ã¤ãšã¤å—ä¿¡
- Python ã®`async for`ã¨åŒã˜ä»•çµ„ã¿

##### MainActor.runï¼ˆUIæ›´æ–°ï¼‰
```swift
await MainActor.run {
    transcribedText = result.text
}
```
- SwiftUIã®UIæ›´æ–°ã¯**ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ¬ãƒƒãƒ‰**ã§å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚‹
- `MainActor.run`ã§ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ¬ãƒƒãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆ

#### 3. é€²æ—è¡¨ç¤ºã®å®Ÿè£…

WhisperKitã®`result`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ä»¥ä¸‹ã®æƒ…å ±ãŒå«ã¾ã‚Œã¾ã™:

```swift
struct TranscriptionResult {
    let text: String  // æ–‡å­—èµ·ã“ã—çµæœ
    let progress: Double  // é€²æ—ç‡ï¼ˆ0.0ã€œ1.0ï¼‰
    let segments: [Segment]  // ã‚»ã‚°ãƒ¡ãƒ³ãƒˆè©³ç´°ï¼ˆå˜èªãƒ¬ãƒ™ãƒ«ï¼‰
}
```

**é€²æ—ãƒãƒ¼ã®å®Ÿè£…ä¾‹**:
```swift
struct TranscriptionView: View {
    @State private var progress: Double = 0.0

    var body: some View {
        ProgressView(value: progress) {
            Text("é€²æ—: \(Int(progress * 100))%")
        }
    }
}
```

---

## ãƒãƒ£ãƒ³ã‚¯å‡¦ç†ã®è©³ç´°

### ãƒãƒ£ãƒ³ã‚¯ã‚µã‚¤ã‚º

WhisperKitã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã§ã¯ã€**ç´„30ç§’**ã®ãƒãƒ£ãƒ³ã‚¯ã«åˆ†å‰²ã•ã‚Œã¾ã™ã€‚

**10åˆ†éŸ³å£°ã®å ´åˆ**:
```
600ç§’ Ã· 30ç§’ = 20ãƒãƒ£ãƒ³ã‚¯
```

**å‡¦ç†ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ï¼ˆBase ãƒ¢ãƒ‡ãƒ«ã€iPhone 14æƒ³å®šï¼‰**:
```
0ç§’   ãƒãƒ£ãƒ³ã‚¯1å‡¦ç†é–‹å§‹
3ç§’   ãƒãƒ£ãƒ³ã‚¯1å®Œäº† â†’ "ã“ã‚“ã«ã¡ã¯ã€‚" è¡¨ç¤º
3ç§’   ãƒãƒ£ãƒ³ã‚¯2å‡¦ç†é–‹å§‹
6ç§’   ãƒãƒ£ãƒ³ã‚¯2å®Œäº† â†’ "ä»Šæ—¥ã¯è‰¯ã„å¤©æ°—ã§ã™ã­ã€‚" è¿½åŠ è¡¨ç¤º
...
60ç§’  å…¨ãƒãƒ£ãƒ³ã‚¯å‡¦ç†å®Œäº† â†’ å…¨ãƒ†ã‚­ã‚¹ãƒˆè¡¨ç¤ºå®Œäº†
```

**æ¨å®šãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ï¼ˆ10åˆ†éŸ³å£°ï¼‰**:

| ãƒ¢ãƒ‡ãƒ« | iPhone 12 | iPhone 14 | iPhone 15 Pro |
|--------|-----------|-----------|---------------|
| Tiny | 20ç§’ | 15ç§’ | 10ç§’ |
| Base | 40ç§’ | 30ç§’ | 20ç§’ |
| Small | 60ç§’ | 45ç§’ | 30ç§’ |

### ãƒãƒ£ãƒ³ã‚¯å¢ƒç•Œã®å‡¦ç†

**å•é¡Œ**:
ãƒãƒ£ãƒ³ã‚¯ãŒéŸ³å£°ã®é€”ä¸­ã§åˆ‡ã‚Œã‚‹ã¨ã€æ–‡è„ˆãŒå¤±ã‚ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

**ä¾‹**:
```
éŸ³å£°: "ä»Šæ—¥ã¯è‰¯ã„å¤©æ°—ã§ã™ã­ã€‚æ˜æ—¥ã‚‚æ™´ã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚"

ãƒãƒ£ãƒ³ã‚¯1ï¼ˆ0-30ç§’ï¼‰: "ä»Šæ—¥ã¯è‰¯ã„å¤©æ°—ã§ã™ã­ã€‚æ˜æ—¥ã‚‚"
ãƒãƒ£ãƒ³ã‚¯2ï¼ˆ30-60ç§’ï¼‰: "æ™´ã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚"
                      â†‘ æ–‡è„ˆãŒåˆ†æ–­ã•ã‚Œã¦ã„ã‚‹
```

**WhisperKitã®å¯¾ç­–**:
- å„ãƒãƒ£ãƒ³ã‚¯ã«**ã‚ªãƒ¼ãƒãƒ¼ãƒ©ãƒƒãƒ—**ï¼ˆé‡è¤‡éƒ¨åˆ†ï¼‰ã‚’æŒãŸã›ã‚‹
- å‰ã®ãƒãƒ£ãƒ³ã‚¯ã®æœ€å¾Œ5ç§’ã‚’æ¬¡ã®ãƒãƒ£ãƒ³ã‚¯ã®æœ€åˆã«å«ã‚ã‚‹
- é‡è¤‡éƒ¨åˆ†ã‚’è‡ªå‹•çš„ã«ãƒãƒ¼ã‚¸

**è¨­å®šä¾‹**ï¼ˆã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ï¼‰:
```swift
let options = DecodingOptions(
    chunkLength: 30.0,  // ãƒãƒ£ãƒ³ã‚¯ã‚µã‚¤ã‚ºï¼ˆç§’ï¼‰
    overlapLength: 5.0  // ã‚ªãƒ¼ãƒãƒ¼ãƒ©ãƒƒãƒ—ï¼ˆç§’ï¼‰
)
```

---

## æ–‡å¢ƒç•Œæ•´å½¢ã®æ–¹é‡

### å•é¡Œ: ãƒãƒ£ãƒ³ã‚¯å¢ƒç•Œã§ã®æ–‡ã®é€”åˆ‡ã‚Œ

**ç¾è±¡**:
```
ãƒãƒ£ãƒ³ã‚¯1: "ã“ã‚“ã«ã¡ã¯ã€‚ä»Šæ—¥ã¯è‰¯ã„"
ãƒãƒ£ãƒ³ã‚¯2: "å¤©æ°—ã§ã™ã­ã€‚"
```

**ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã‚‹ç”»é¢**:
```
ã“ã‚“ã«ã¡ã¯ã€‚ä»Šæ—¥ã¯è‰¯ã„
å¤©æ°—ã§ã™ã­ã€‚
â†‘ ä¸è‡ªç„¶ãªæ”¹è¡Œ
```

### è§£æ±ºç­–1: wordTimestampsã«ã‚ˆã‚‹å¢ƒç•Œæ¤œå‡º

WhisperKitã®`wordTimestamps`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã¨ã€**å˜èªãƒ¬ãƒ™ãƒ«**ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ãŒå–å¾—ã§ãã¾ã™ã€‚

```swift
let options = DecodingOptions(
    wordTimestamps: true  // å˜èªãƒ¬ãƒ™ãƒ«ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’æœ‰åŠ¹åŒ–
)
```

**å–å¾—ã§ãã‚‹æƒ…å ±**:
```swift
result.segments[0].words = [
    Word(text: "ã“ã‚“ã«ã¡ã¯", start: 0.0, end: 1.2),
    Word(text: "ã€‚", start: 1.2, end: 1.3),
    Word(text: "ä»Šæ—¥", start: 1.5, end: 2.0),
    Word(text: "ã¯", start: 2.0, end: 2.2),
    ...
]
```

**æ–‡å¢ƒç•Œã®åˆ¤å®š**:
```swift
func shouldInsertLineBreak(word: Word) -> Bool {
    // å¥èª­ç‚¹ã®å¾Œã«æ”¹è¡Œã‚’æŒ¿å…¥
    return word.text.hasSuffix("ã€‚") || word.text.hasSuffix("ï¼") || word.text.hasSuffix("ï¼Ÿ")
}
```

### è§£æ±ºç­–2: å¥èª­ç‚¹è£œå®Œ

Whisperã¯å¥èª­ç‚¹ã‚’æ­£ç¢ºã«äºˆæ¸¬ã—ã¾ã™ãŒã€ã¾ã‚Œã«æ¬ è½ã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

**è£œå®Œãƒ«ãƒ¼ãƒ«**:
```swift
func insertPunctuation(text: String) -> String {
    var result = text

    // æ–‡ãŒé•·ã™ãã‚‹å ´åˆï¼ˆ80æ–‡å­—ä»¥ä¸Šï¼‰ã€å¥ç‚¹ã‚’æŒ¿å…¥
    if result.count > 80 && !result.hasSuffix("ã€‚") {
        result += "ã€‚"
    }

    return result
}
```

**Mac/Windowsç‰ˆã§ã®å®Ÿè£…ã‚’å‚è€ƒ**:
- å¥èª­ç‚¹ã§ã®æ”¹è¡Œ
- 80æ–‡å­—æŠ˜ã‚Šè¿”ã—
- ã“ã‚Œã‚‰ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’Swiftã«ç§»æ¤

---

## ç•™æ„ç‚¹ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 1. ãƒ¡ãƒ¢ãƒªç®¡ç†

**å•é¡Œ**: é•·æ™‚é–“éŸ³å£°ï¼ˆ10åˆ†ä»¥ä¸Šï¼‰ã§ã¯ã€ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ãŒå¢—åŠ ã—ã¾ã™ã€‚

**å¯¾ç­–**:
```swift
// ãƒãƒ£ãƒ³ã‚¯å‡¦ç†å®Œäº†å¾Œã€å¤ã„ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚’å‰Šé™¤
func processChunk(result: TranscriptionResult) {
    // æœ€æ–°ã®çµæœã®ã¿ã‚’ä¿æŒ
    if segments.count > 100 {
        segments.removeFirst(50)  // å¤ã„ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚’å‰Šé™¤
    }
}
```

### 2. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

**å…¸å‹çš„ãªã‚¨ãƒ©ãƒ¼**:
- ãƒ¢ãƒ‡ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å¤±æ•—
- ãƒ¡ãƒ¢ãƒªä¸è¶³
- éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼

**å®Ÿè£…ä¾‹**:
```swift
do {
    for try await result in whisperKit.transcribe(...) {
        // å‡¦ç†
    }
} catch let error as WhisperError {
    switch error {
    case .modelNotFound:
        print("âŒ ãƒ¢ãƒ‡ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")
    case .outOfMemory:
        print("âŒ ãƒ¡ãƒ¢ãƒªä¸è¶³")
    default:
        print("âŒ ã‚¨ãƒ©ãƒ¼: \(error)")
    }
}
```

### 3. ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å®Ÿè¡Œ

**å•é¡Œ**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ›ãƒ¼ãƒ ç”»é¢ã«æˆ»ã‚‹ã¨ã€å‡¦ç†ãŒåœæ­¢ã™ã‚‹ã€‚

**å¯¾ç­–**: `Background Modes`ã‚’æœ‰åŠ¹åŒ–

**Xcodeè¨­å®š**:
1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š â†’ ã€ŒSigning & Capabilitiesã€
2. ã€Œ+ Capabilityã€â†’ ã€ŒBackground Modesã€ã‚’è¿½åŠ 
3. ã€ŒAudio, AirPlay, and Picture in Pictureã€ã«ãƒã‚§ãƒƒã‚¯

**ã‚³ãƒ¼ãƒ‰å®Ÿè£…**:
```swift
import AVFoundation

// ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’è¨­å®š
let audioSession = AVAudioSession.sharedInstance()
try audioSession.setCategory(.playback, mode: .default)
try audioSession.setActive(true)
```

### 4. ç™ºç†±å¯¾ç­–

**å•é¡Œ**: é•·æ™‚é–“æ¨è«–ã§iPhoneãŒç™ºç†±ã™ã‚‹ã€‚

**å¯¾ç­–**:
- å‡¦ç†å‰ã«ã€Œæ¨å®šæ‰€è¦æ™‚é–“ã€ã‚’è¡¨ç¤º
- ã‚µãƒ¼ãƒãƒ«çŠ¶æ…‹ã‚’ç›£è¦–ã—ã€éç†±æ™‚ã¯ä¸€æ™‚åœæ­¢

**ã‚µãƒ¼ãƒãƒ«ç›£è¦–**:
```swift
import Foundation

// ã‚µãƒ¼ãƒãƒ«çŠ¶æ…‹ã®ç›£è¦–
NotificationCenter.default.addObserver(
    forName: ProcessInfo.thermalStateDidChangeNotification,
    object: nil,
    queue: .main
) { _ in
    let state = ProcessInfo.processInfo.thermalState

    switch state {
    case .critical:
        print("âš ï¸ éç†±: å‡¦ç†ã‚’ä¸€æ™‚åœæ­¢ã—ã¾ã™")
        // å‡¦ç†ã‚’ä¸­æ–­
    default:
        break
    }
}
```

### 5. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

**æ¨å¥¨UIè¦ç´ **:
- âœ… é€²æ—ãƒãƒ¼ï¼ˆãƒ‘ãƒ¼ã‚»ãƒ³ãƒ†ãƒ¼ã‚¸è¡¨ç¤ºï¼‰
- âœ… æ¨å®šæ®‹ã‚Šæ™‚é–“ï¼ˆã€Œæ®‹ã‚Š30ç§’ã€ï¼‰
- âœ… ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³
- âœ… ç¾åœ¨å‡¦ç†ä¸­ã®ãƒãƒ£ãƒ³ã‚¯ç•ªå·ï¼ˆã€Œ20ãƒãƒ£ãƒ³ã‚¯ä¸­5ãƒãƒ£ãƒ³ã‚¯å‡¦ç†ä¸­ã€ï¼‰

**å®Ÿè£…ä¾‹**:
```swift
struct TranscriptionProgressView: View {
    @State private var progress: Double = 0.0
    @State private var currentChunk: Int = 0
    @State private var totalChunks: Int = 20

    var body: some View {
        VStack {
            ProgressView(value: progress)
            Text("\(currentChunk)/\(totalChunks) ãƒãƒ£ãƒ³ã‚¯å‡¦ç†ä¸­")
            Text("æ®‹ã‚Šæ™‚é–“: ç´„\(estimatedTime)ç§’")
        }
    }

    var estimatedTime: Int {
        let remainingChunks = totalChunks - currentChunk
        return remainingChunks * 3  // 1ãƒãƒ£ãƒ³ã‚¯3ç§’ã¨ä»®å®š
    }
}
```

---

## ğŸ“š æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

WhisperKitã®ä»•çµ„ã¿ã‚’ç†è§£ã—ãŸã‚‰ã€ä»¥ä¸‹ã«é€²ã‚“ã§ãã ã•ã„ï¼š

1. **[æ€§èƒ½è¨ˆæ¸¬ã‚¬ã‚¤ãƒ‰](performance_measurement_guide.md)** - å®Ÿæ©Ÿã§ã®è¨ˆæ¸¬æ–¹æ³•
2. **Phase 2: UIå®Ÿè£…** - SwiftUIã§ã®å®Ÿè£…ï¼ˆåˆ¥é€”ã‚¬ã‚¤ãƒ‰æä¾›ï¼‰

---

## ğŸ“– å‚è€ƒãƒªãƒ³ã‚¯

- **WhisperKitå…¬å¼ãƒªãƒã‚¸ãƒˆãƒª**: https://github.com/argmaxinc/WhisperKit
- **WhisperKitå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: https://github.com/argmaxinc/WhisperKit/blob/main/README.md
- **Whisperè«–æ–‡**: https://arxiv.org/abs/2212.04356
- **Apple CoreMLå…¬å¼ã‚¬ã‚¤ãƒ‰**: https://developer.apple.com/documentation/coreml

---

**æœ€çµ‚æ›´æ–°**: 2025-10-23
**ä½œæˆ**: Claude Code
**ãƒ¬ãƒ“ãƒ¥ãƒ¼**: Codexï¼ˆäºˆå®šï¼‰
